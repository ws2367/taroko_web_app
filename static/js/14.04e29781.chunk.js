(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1684:function(e,t,n){},1696:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(348),l=n(1680),i=n(79),c=n(337),s=n.n(c),u=n(188),m=n.n(u),d=n(1562),f=n.n(d),p=n(62),h=n(130),g=n.n(h),b=n(53),y=n.n(b),v=(n(1559),n(1645)),E=n(177),C=n.n(E),w=n(499),N=n.n(w),S=n(334),x=n.n(S),_=n(295),O=n.n(_),k=n(158),T=n.n(k),j=n(1288),P=n.n(j);function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function R(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var W={PaperProps:{style:{maxHeight:224,width:250}}},M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=R(this,I(t).call(this,e))).getTagName=function(e){return n.props.tagOptions.find(function(t){return t.id==e}).name},n.handleDelete=function(e){return function(){var t=n.state.tags.filter(function(t){return t!==e});n.setState({tags:t}),n.props.onChange&&n.props.onChange({target:{value:t}})}},n.handleChange=function(e){console.log(e.target),n.setState({tags:e.target.value}),n.props.onChange&&n.props.onChange(e)},n.state={tags:e.tags||[]},n}var n,a,r;return n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.theme,r=t.tagOptions,l=t.title,i=this.state.tags;return o.a.createElement("div",{className:n.root},o.a.createElement(x.a,{className:n.formControl},l&&o.a.createElement(N.a,{htmlFor:"select-multiple-chip"},l),o.a.createElement(O.a,{multiple:!0,value:i,onChange:this.handleChange,input:o.a.createElement(C.a,{id:"select-multiple-chip"}),renderValue:function(t){return o.a.createElement("div",{className:n.chips},t.map(function(t){return o.a.createElement(P.a,{key:t,label:e.getTagName(t),className:n.chip,onDelete:e.handleDelete(t)})}))},MenuProps:W},r.map(function(e){return o.a.createElement(g.a,{key:e.id,value:e.id,style:{fontWeight:void 0===i.indexOf(e.id)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}},o.a.createElement(T.a,{checked:i.indexOf(e.id)>-1}),e.name)}))))}}])&&L(n.prototype,a),r&&L(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");F(e.prototype,t&&t.prototype),t&&F(e,t)}(t,e),t}(o.a.Component),V=Object(p.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:400,maxWidth:"80%"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4}}},{withTheme:!0})(M),B=n(1677);function A(e){return(A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function z(e,t){return!t||"object"!==A(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Q=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return z(a,(n=a=z(this,(e=G(t)).call.apply(e,[this].concat(r))),a.getOptionLabel=function(e){var t=a.props.options.find(function(t){return t.id===e});return t?t.name:e},a.state={isLoading:!1,value:a.props.tags.map(function(e){return{value:e,label:a.getOptionLabel(e)}})},a.convertTagsToOptions=function(e){return e.map(function(e){return{label:e.name,value:e.id}})},a.convertOptionsToTags=function(e){return e&&e.map(function(e){return e.value})||[]},a.handleChange=function(e,t){console.group("Value Changed"),console.log(e),console.log("action: ".concat(t.action)),console.groupEnd(),a.setState({value:e}),a.props.handleChange({target:{value:a.convertOptionsToTags(e)}})},a.handleCreate=function(e){a.setState({isLoading:!0}),console.group("Creating option"),console.log(e),console.groupEnd(),a.props.handleCreateTag(e).then(function(e){console.log(e),a.setState({isLoading:!1});var t=a.state.value;a.handleChange(t.concat(a.convertTagsToOptions([e])),{action:"create-option"})},function(e){})},n))}var n,a,r;return n=t,(a=[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.value,a=this.convertTagsToOptions(this.props.options);return o.a.createElement(B.a,{variant:"standard",isClearable:!0,isMulti:!0,formatCreateLabel:this.props.formatCreateLabel,isDisabled:t,isLoading:t,onChange:this.handleChange,onCreateOption:this.handleCreate,options:a,value:n})}}])&&q(n.prototype,a),r&&q(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");J(e.prototype,t&&t.prototype),t&&J(e,t)}(t,e),t}(a.Component),H=n(131),K=n.n(H),U=n(57),X=n.n(U),Y=n(96),Z=n.n(Y),$=n(342),ee=n.n($),te=n(242),ne=n.n(te);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function ce(e){var t=e.handleClose,n=e.handleClick,a=e.open,r=e.relations;return o.a.createElement(ne.a,{onClose:t,"aria-labelledby":"simple-dialog-title",open:a},o.a.createElement(ee.a,{id:"simple-dialog-title"},"\u9078\u64c7\u95dc\u4fc2"),o.a.createElement(K.a,null,Object.keys(r).map(function(e){return o.a.createElement(X.a,{button:!0,onClick:function(){return n(e)},key:e},o.a.createElement(Z.a,{primary:r[e]}))})))}var se=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return le(a,(n=a=le(this,(e=ie(t)).call.apply(e,[this].concat(r))),a.getOptionLabel=function(e,t){return a.props.options.find(function(t){return t.id===e}).name+"("+a.props.relations[t]+")"},a.state={openDialog:!1,isLoading:!1,newClientName:null,value:(a.props.relatedClients||[]).map(function(e){return{relation:e.relation,value:e.id,label:a.getOptionLabel(e.id,e.relation)}})},a.convertTagsToOptions=function(e){return e.map(function(e){return{label:e.name,value:e.id}})},a.convertValueToTags=function(e){return e&&e.map(function(e){return{relation:e.relation,id:e.value}})||[]},a.handleChange=function(e,t){console.group("Value Changed"),console.log(e),console.log("action: ".concat(t.action)),console.groupEnd(),"select-option"===t.action?a.setState({openDialog:!0,newRelation:e.pop()}):(a.setState({value:e}),a.props.onChange({target:{value:a.convertValueToTags(e)}}))},a.handleCreate=function(e){a.setState({isLoading:!0,newClientName:e}),console.group("Creating option"),console.log(e),console.groupEnd(),a.setState({openDialog:!0})},a.updateRelation=function(e){var t=a.state.value.concat(e);a.setState({value:t,openDialog:!1,isLoading:!1,newClientName:null,newRelation:null}),a.props.onChange({target:{value:a.convertValueToTags(t)}})},a.handleCloseDialog=function(e){a.setState({openDialog:!1,isLoading:!1,newClientName:null,newRelation:!1})},a.handleClickDialog=function(e){a.state.newClientName&&a.state.newClientName.length>0?a.props.createClient({name:a.state.newClientName}).then(function(t){console.group("Add New Client"),console.log(t),console.log(e),console.groupEnd(),a.updateRelation({relation:e,value:t.id,label:a.state.newClientName+"("+a.props.relations[e]+")"})}):(console.group("Add Existing Client"),console.log(a.state.newRelation),console.log(e),console.groupEnd(),a.updateRelation({value:a.state.newRelation.value,label:a.getOptionLabel(a.state.newRelation.value,e),relation:e}))},n))}var n,a,r;return n=t,(a=[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.value,a=e.openDialog,r=this.props.relations,l=this.convertTagsToOptions(this.props.options);return console.log(this.props.relatedClients),o.a.createElement(o.a.Fragment,null,o.a.createElement(ce,{open:a,relations:r,handleClose:this.handleCloseDialog,handleClick:this.handleClickDialog}),o.a.createElement(B.a,{variant:"standard",isClearable:!0,isMulti:!0,formatCreateLabel:this.props.formatCreateLabel,isDisabled:t,isLoading:t,onChange:this.handleChange,onCreateOption:this.handleCreate,options:l,value:n}))}}])&&re(n.prototype,a),r&&re(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");oe(e.prototype,t&&t.prototype),t&&oe(e,t)}(t,e),t}(a.Component),ue=(n(1566),n(110));function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e){return(de="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");he(e.prototype,t&&t.prototype),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function be(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}function ye(e,t){return!t||"object"!==de(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Ee=function(){return o.a.createElement("div",{className:"ball-grid-pulse"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))},Ce=function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"40%"},longTextField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"90%"},menu:{width:200},leftIcon:{marginRight:e.spacing.unit}}},we=function(e){function t(){return fe(this,t),ye(this,ve(t).apply(this,arguments))}return be(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.config,r=e.profile,l=e.handleChange,i=e.handleCreateTag;e.addToConfig;return o.a.createElement(a.Fragment,null,o.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{required:!0,id:"name",label:"\u59d3\u540d",className:t.textField,value:r.name,onChange:l("name"),margin:"normal"}),o.a.createElement("div",{className:"picker"},o.a.createElement(y.a,{InputLabelProps:{shrink:!0},placeholder:"\u8acb\u9078\u751f\u65e5",type:"date",label:"\u751f\u65e5",value:r.birthday,onChange:l("birthday"),margin:"normal"})),o.a.createElement(Q,{title:"\u6a19\u7c64",formatCreateLabel:function(e){return"\u65b0\u589e\u6a19\u7c64\uff1a"+e},tags:r.tags,options:n.tags,handleCreateTag:i("tags"),handleChange:l("tags"),label:"Tag"}),o.a.createElement("div",{className:"divider"}),o.a.createElement(y.a,{id:"email",label:"Email",type:"email",value:r.email,className:t.textField,onChange:l("email"),margin:"normal"}),o.a.createElement(y.a,{id:"cell_phone",label:"\u96fb\u8a71\u865f\u78bc",className:t.textField,onChange:l("cell_phone"),value:r.cell_phone,type:"tel",margin:"normal"}),o.a.createElement(y.a,{id:"company",label:"\u4efb\u8077\u516c\u53f8/\u8077\u7a31",value:r.company,className:t.textField,onChange:l("company"),margin:"normal"}),o.a.createElement(y.a,{id:"address",label:"\u5730\u5740",value:r.address,className:t.textField,onChange:l("address"),margin:"normal"}),o.a.createElement(y.a,{id:"income",select:!0,label:"\u6708\u6536\u5165",className:t.textField,value:String(r.income),onChange:l("income"),SelectProps:{MenuProps:{className:t.menu}},helperText:"\u8acb\u9078\u64c7\u6536\u5165",margin:"normal"},Object.keys(n.income).map(function(e){return o.a.createElement(g.a,{key:e,value:e},n.income[e])})),o.a.createElement(y.a,{id:"source",select:!0,label:"\u8a8d\u8b58\u65b9\u5f0f",className:t.textField,value:String(r.source),onChange:l("source"),SelectProps:{MenuProps:{className:t.menu}},helperText:"\u8acb\u9078\u64c7\u8a8d\u8b58\u65b9\u5f0f",margin:"normal"},Object.keys(n.source).map(function(e){return o.a.createElement(g.a,{key:e,value:e},n.source[e])})),o.a.createElement(Q,{id:"interests",title:"\u4f11\u9592\u8208\u8da3",formatCreateLabel:function(e){return"\u65b0\u589e\u4f11\u9592\u8208\u8da3\uff1a"+e},tags:r.interests,options:n.interests,handleCreateTag:i("interests"),handleChange:l("interests"),label:"Interests"})))}}]),pe(t,e),t}(o.a.Component),Ne=function(e){function t(){return fe(this,t),ye(this,ve(t).apply(this,arguments))}return be(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.config,a=e.profile,r=e.handleChange;e.handleCreateTag,e.addToConfig;return o.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{select:!0,id:"is_insured",label:"\u6709\u4fdd\u96aa\uff1f",className:t.textField,value:String(a.is_insured),SelectProps:{MenuProps:{className:t.menu}},onChange:r("is_insured"),margin:"normal"},Object.keys(n.is_insured).map(function(e){return o.a.createElement(g.a,{key:e,value:e},n.is_insured[e])})),o.a.createElement(V,{id:"insurance_companies",title:"\u6295\u4fdd\u516c\u53f8",tags:a.insurance_companies,tagOptions:n.insurance_companies,onChange:r("insurance_companies"),label:"\u6295\u4fdd\u516c\u53f8"}),o.a.createElement(V,{id:"insurances_of_interest",title:"\u6709\u8208\u8da3\u4fdd\u96aa\u7a2e\u985e",tags:a.insurances_of_interest,tagOptions:n.insurances_of_interest,onChange:r("insurances_of_interest"),label:"\u6709\u8208\u8da3\u4fdd\u96aa\u7a2e\u985e"}))}}]),pe(t,e),t}(o.a.Component),Se=function(e){function t(){return fe(this,t),ye(this,ve(t).apply(this,arguments))}return be(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.config,e.profile),a=e.handleChange;e.handleCreateTag,e.addToConfig;return o.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{multiline:!0,InputLabelProps:{shrink:!0},fullWidth:!0,id:"financial_plan",value:n.financial_plan||void 0,onChange:a("financial_plan"),className:t.longTextField,margin:"normal",variant:"outlined"}))}}]),pe(t,e),t}(o.a.Component),xe=function(e){function t(){return fe(this,t),ye(this,ve(t).apply(this,arguments))}return be(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.config,a=e.profile,r=e.clientOptions,l=e.handleChange,i=e.createClient;e.addToConfig;return o.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{select:!0,id:"marital_status",label:"\u5a5a\u59fb\u72c0\u6cc1",value:String(a.marital_status),className:t.longTextField,onChange:l("marital_status"),SelectProps:{MenuProps:{className:t.menu}},margin:"normal"},Object.keys(n.marital_status).map(function(e){return o.a.createElement(g.a,{key:e,value:e},n.marital_status[e])})),o.a.createElement(se,{title:"\u5ef6\u4f38\u89aa\u53cb\u540d\u55ae",relatedClients:a.related_clients,relations:n.client_relation,options:r,createClient:i,onChange:l("related_clients"),id:"related_clients"}))}}]),pe(t,e),t}(o.a.Component),_e=function(e){function t(){return fe(this,t),ye(this,ve(t).apply(this,arguments))}return be(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.config,e.profile);e.handleChange,e.handleCreateTag,e.addToConfig;return o.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{multiline:!0,InputLabelProps:{shrink:!0},fullWidth:!0,id:"appendix",label:"\u5099\u8a3b",variant:"outlined",value:n.appendix||void 0,className:t.longTextField,margin:"normal"}))}}]),pe(t,e),t}(o.a.Component),Oe=Object(p.withStyles)(Ce)(we),ke=Object(p.withStyles)(Ce)(Ne),Te=Object(p.withStyles)(Ce)(Se),je=Object(p.withStyles)(Ce)(xe),Pe=Object(p.withStyles)(Ce)(_e),De=function(e){function t(e){var n;return fe(this,t),(n=ye(this,ve(t).call(this,e))).fetchClient=function(e){fetch("https://api.cooby.co/clients/",{method:"GET",mode:"cors",headers:Object(ue.d)()}).then(function(e){return e.json()}).then(function(t){var a=t.clients.filter(function(t){return t.profile.id===e})[0];n.setState({isLoaded:!0,profile:a.profile,clientOptions:t.clients.map(function(e){return{id:e.profile.id,name:e.profile.name}}),config:t.config}),n.props.handlers.updateClientName(a.profile.name)},function(e){n.setState({isLoaded:!1,error:e})})},n.createClient=function(e){var t=n.state.clientOptions;return new Promise(function(a,o){fetch("https://api.cooby.co/clients/",{method:"POST",mode:"cors",headers:Object(ue.d)(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(o){console.log(o);var r={id:o.id,name:e.name},l=t.concat();n.setState({clientOptions:l}),a(r)},function(e){console.log(e),o(e)})})},n.handleCreateTag=function(e){return function(t){var a="https://api.cooby.co/"+e+"/";return new Promise(function(o,r){fetch(a,{method:"POST",mode:"cors",headers:Object(ue.d)(),body:JSON.stringify({name:t})}).then(function(e){return e.json()}).then(function(a){var r={id:a.id,name:t};n.addToConfig(e,r),o(r)},function(e){n.setState({error:e}),r(e)})})}},n.handleChange=function(e){return function(t){var a=t.target.value;n.setState(function(t){return{profile:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){me(e,t,n[t])})}return e}({},t.profile,me({},e,a))}});var o=me({id:n.state.profile.id},e,a);fetch("https://api.cooby.co/clients/"+o.id,{method:"PUT",mode:"cors",headers:Object(ue.d)(),body:JSON.stringify(o)}).then(function(e){return e.json()}).then(function(e){console.log(e)}),"name"==e&&n.props.handlers.updateClientName(a)}},n.addToConfig=function(e,t){var a=n.state.config;a[e].push(t),n.setState({config:a})},n.state={isLoaded:!1},n}return be(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.clientId!==e.clientId||t!==this.state}},{key:"componentDidMount",value:function(){this.fetchClient(this.props.clientId)}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,n=e.profile,a=e.config,r=e.clientOptions,l=this.props.clientId;return t?o.a.createElement("div",{className:"container-fluid"},o.a.createElement("article",{className:"article pt-3"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-6"},o.a.createElement("div",{className:"box box-default mb-3"},o.a.createElement("div",{className:"box-header"},"\u57fa\u672c\u8cc7\u6599"),o.a.createElement("div",{className:"box-divider"}),o.a.createElement("div",{className:"box-body"},o.a.createElement(Oe,{key:l,profile:n,config:a,handleChange:this.handleChange,addToConfig:this.addToConfig,handleCreateTag:this.handleCreateTag}))),o.a.createElement("div",{className:"box box-default mb-3"},o.a.createElement("div",{className:"box-header"},"\u4fdd\u96aa\u72c0\u6cc1"),o.a.createElement("div",{className:"box-divider"}),o.a.createElement("div",{className:"box-body"},o.a.createElement(ke,{key:l,profile:n,config:a,handleChange:this.handleChange,addToConfig:this.addToConfig,handleCreateTag:this.handleCreateTag})))),o.a.createElement("div",{className:"col-xl-6"},o.a.createElement("div",{className:"box box-default mb-3"},o.a.createElement("div",{className:"box-header"},"\u8ca1\u52d9\u898f\u5283"),o.a.createElement("div",{className:"box-divider"}),o.a.createElement("div",{className:"box-body"},o.a.createElement(Te,{key:l,profile:n,config:a,handleChange:this.handleChange,addToConfig:this.addToConfig,handleCreateTag:this.handleCreateTag}))),o.a.createElement("div",{className:"box box-default mb-3"},o.a.createElement("div",{className:"box-header"},"\u5a5a\u59fb\u8207\u5bb6\u5ead"),o.a.createElement("div",{className:"box-divider"}),o.a.createElement("div",{className:"box-body"},o.a.createElement(je,{key:l,profile:n,config:a,clientOptions:r,handleChange:this.handleChange,addToConfig:this.addToConfig,createClient:this.createClient}))),o.a.createElement("div",{className:"box box-default mb-3"},o.a.createElement("div",{className:"box-header"},"\u5099\u8a3b"),o.a.createElement("div",{className:"box-divider"}),o.a.createElement("div",{className:"box-body"},o.a.createElement(Pe,{key:l,profile:n,config:a,handleChange:this.handleChange,addToConfig:this.addToConfig}))))))):o.a.createElement(v.a,{container:!0,justify:"center"},o.a.createElement("div",{className:"m-10"},o.a.createElement(Ee,null)))}}]),pe(t,e),t}(o.a.Component),Fe=n(69),Le=n.n(Fe),Re=n(1223),Ie=n.n(Re),We=n(38),Me=n.n(We),Ve=n(95),Be=n.n(Ve),Ae=n(104),Je=n.n(Ae),qe=n(1644),ze=n.n(qe),Ge=n(59),Qe=n.n(Ge),He=n(576),Ke=n.n(He),Ue=n(574),Xe=n.n(Ue),Ye=n(350);function Ze(e){return(Ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){et(e,t,n[t])})}return e}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function at(e,t){return!t||"object"!==Ze(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var rt=function(e){var t=e.note,n=e.classes,a=e.handleChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{variant:"subheading",gutterBottom:!0},"\u905e\u9001\u7d30\u7bc0"),o.a.createElement(y.a,{id:"sent_time",label:"\u905e\u9001\u65e5\u671f",type:"date",value:t.additional_data.sent_time,className:n.textField,onChange:a(!0,"sent_time"),margin:"normal"}),o.a.createElement(y.a,{id:"sent_content",label:"\u905e\u9001\u5167\u5bb9",value:t.additional_data.sent_content,className:n.longTextField,onChange:a(!0,"sent_content"),margin:"normal"}))},lt=function(e){var t=e.note,n=e.classes,a=e.handleChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{label:"\u5730\u9ede",className:n.textField,value:t.location,onChange:a(!1,"location"),margin:"normal"}),o.a.createElement(y.a,{required:!0,id:"date",label:"\u65e5\u671f",type:"date",value:t.date,className:n.textField,onChange:a(!1,"date"),margin:"normal"}),o.a.createElement(y.a,{id:"appendix",label:"\u5099\u8a3b",value:t.appendix,variant:"outlined",className:n.longTextField,onChange:a(!1,"appendix"),margin:"normal"}))},it=function(e){var t=e.note,n=e.classes,a=e.handleChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{variant:"subheading",gutterBottom:!0},"\u7406\u8ce0\u7d30\u7bc0"),o.a.createElement(y.a,{id:"claim_time",label:"\u7406\u8ce0\u65e5\u671f",type:"date",value:t.additional_data.claim_time,className:n.textField,onChange:a(!0,"claim_time"),margin:"normal"}),o.a.createElement(y.a,{id:"claim_content",label:"\u7406\u8ce0\u5167\u5bb9",value:t.additional_data.claim_content,className:n.longTextField,onChange:a(!0,"claim_content"),margin:"normal"}))},ct=function(e){var t=e.note,n=e.classes,a=e.handleChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qe.a,{variant:"subheading",gutterBottom:!0},"\u7c3d\u7d04\u7d30\u7bc0"),o.a.createElement(y.a,{id:"signed_time",label:"\u7c3d\u7d04\u65e5\u671f",type:"date",value:t.additional_data.signed_time,className:n.textField,onChange:a(!0,"signed_time"),margin:"normal"}),o.a.createElement(y.a,{id:"signed_content",label:"\u7c3d\u7d04\u5167\u5bb9",value:t.additional_data.signed_content,className:n.longTextField,onChange:a(!0,"signed_content"),margin:"normal"}))},st=function(e){var t=e.note,n=e.classes,a=e.handleChange;return o.a.createElement(y.a,{id:"current_insurance",label:"\u4fdd\u96aa\u72c0\u6cc1",value:t.additional_data.current_insurance,className:n.longTextField,onChange:a(!0,"current_insurance"),margin:"normal"})},ut=function(e){var t=e.note,n=e.classes,a=e.handleChange;switch(String(t.note_type)){case"1":return o.a.createElement(st,{note:t,classes:n,handleChange:a});case"2":return o.a.createElement(rt,{note:t,classes:n,handleChange:a});case"3":return o.a.createElement(ct,{note:t,classes:n,handleChange:a});case"4":return o.a.createElement(it,{note:t,classes:n,handleChange:a});default:return o.a.createElement(o.a.Fragment,null)}},mt=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return at(a,(n=a=at(this,(e=ot(t)).call.apply(e,[this].concat(r))),a.state={note:$e({},a.props.note,{additional_data:$e({},a.props.note.additional_data)})||{additional_data:{}}},a.handleChange=function(e,t){return function(n){var o=a.state.note;e?o.additional_data[t]=n.target.value:o[t]=n.target.value,a.setState({note:o})}},a.handleSave=function(e){a.props.handleSaveNote(a.state.note)},a.handleDelete=function(e){e.preventDefault(),a.props.handleDeleteNote(a.state.note.id)},n))}var n,a,r;return n=t,(a=[{key:"render",value:function(){var e=this.state.note,t=this.props,n=t.mode,a=t.classes,r=t.isOpen,l=t.handleClose,i=t.config;return o.a.createElement(Xe.a,{anchor:"right",open:r,onClose:l},o.a.createElement("div",{className:a.divContainer},o.a.createElement(Qe.a,{variant:"title",gutterBottom:!0},"create"===n?"\u65b0\u589e\u6703\u8b70\u8a18\u9304":"\u7de8\u8f2f\u6703\u8b70\u8a18\u9304"),o.a.createElement(y.a,{label:"\u6a19\u984c",className:a.textField,InputProps:{classes:{input:{fontSize:50}}},value:e.title,onChange:this.handleChange(!1,"title"),margin:"normal"}),o.a.createElement(Qe.a,{variant:"subheading",gutterBottom:!0},i.note_type[e.note_type]),o.a.createElement("form",{className:a.container,noValidate:!0},o.a.createElement(lt,{note:e,classes:a,handleChange:this.handleChange}),o.a.createElement(ut,{note:e,classes:a,handleChange:this.handleChange})),o.a.createElement("div",{className:"divider"}),"edit"===n&&o.a.createElement(Me.a,{color:"primary",onClick:this.handleDelete},"\u522a\u9664"),o.a.createElement(Ye.a,{color:"secondary",className:"btn-w-md",onClick:l},"\u53d6\u6d88"),o.a.createElement("div",{className:"divider"}),o.a.createElement(Me.a,{variant:"contained",color:"primary",className:"btn-w-md",onClick:this.handleSave},"\u5132\u5b58")))}}])&&nt(n.prototype,a),r&&nt(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");tt(e.prototype,t&&t.prototype),t&&tt(e,t)}(t,e),t}(o.a.Component),dt=Object(p.withStyles)(function(e){return{divContainer:{width:"200px",margin:"20px"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:150,width:"40%"},longTextField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:300,width:"90%"},container:{display:"flex",flexWrap:"wrap"}}})(mt);function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){pt(e,t,n[t])})}return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e){return(ht="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");yt(e.prototype,t&&t.prototype),t&&yt(e,t)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Et(e,t,n){return t&&vt(e.prototype,t),n&&vt(e,n),e}function Ct(e,t){return!t||"object"!==ht(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wt(e){return(wt=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Nt=function(e){function t(){var e,n,a;gt(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return Ct(a,(n=a=Ct(this,(e=wt(t)).call.apply(e,[this].concat(r))),a.state={AnchorEl:null},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleMenuItemClick=function(e){a.setState({anchorEl:null}),a.props.openDrawer({note_type:e.target.value,additional_data:{}})},n))}return Et(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,n=this.props.noteTypes;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me.a,{"aria-controls":"simple-menu","aria-haspopup":"true",variant:"contained",color:"primary",className:"btn-w-md",onClick:this.handleClick},"\u65b0\u589e\u6703\u8b70\u7d00\u9304"),o.a.createElement(Ke.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:this.handleClose},Object.keys(n).map(function(t){return o.a.createElement(g.a,{key:t,value:t,onClick:e.handleMenuItemClick},n[t])})))}}]),bt(t,e),t}(o.a.Component),St=function(e){function t(){var e,n,a;gt(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return Ct(a,(n=a=Ct(this,(e=wt(t)).call.apply(e,[this].concat(r))),a.collectionEndpoint="https://api.cooby.co/clients/"+a.props.clientId+"/notes/",a.state={notes:[],mode:"create",openNoteDrawer:!1,selectedNote:{additional_data:{}},config:{note_type:{0:"\u7a7a\u767d\u7b46\u8a18",1:"\u4e00\u822c\u7b46\u8a18",2:"\u905e\u9001\u5efa\u8b70\u66f8",3:"\u4fdd\u96aa\u7c3d\u7d04",4:"\u4fdd\u96aa\u7406\u8ce0"}}},a.fetchNotes=function(){fetch(a.collectionEndpoint,{method:"GET",mode:"cors",headers:Object(ue.d)()}).then(function(e){return e.json()}).then(function(e){a.setState({notes:e.notes})},function(e){a.setState({error:e})})},a.openDrawer=function(e){return function(t){console.log(t),console.log(e),a.setState({openNoteDrawer:!0,selectedNote:t,mode:e,drawerKey:t.id?t.id:Math.random()})}},a.handleNoteClick=function(e){return function(t){console.log(e),a.openDrawer("edit")(e)}},a.handleClose=function(){a.setState({openNoteDrawer:!1})},a.handleDeleteNote=function(e){var t=a.collectionEndpoint+e;console.log(t),fetch(t,{method:"DELETE",mode:"cors",headers:Object(ue.d)(),body:JSON.stringify({})}).then(function(t){if(t.ok){var n=a.state.notes,o=n.findIndex(function(t){return t.id===e});n.splice(o,1),a.setState({notes:n})}else t.json().then(function(e){console.log(e)});a.handleClose()})},a.handleSaveNote=function(e){console.log(e);var t="edit"===a.state.mode?a.collectionEndpoint+e.id:a.collectionEndpoint;fetch(t,{method:"edit"===a.state.mode?"put":"post",mode:"cors",headers:Object(ue.d)(),body:JSON.stringify(e)}).then(function(e){return e.ok&&"edit"===a.state.mode?(console.log("edittttt"),new Promise(function(e,t){e({})})):(console.log("new!"),e.json())}).then(function(t){if(console.log(t),"edit"===a.state.mode){var n=a.state.notes.findIndex(function(t){return t.id===e.id});if(n){var o=a.state.notes[n],r=a.state.notes;r[n]=ft({},o,e),a.setState({notes:r})}}else a.setState({notes:a.state.notes.concat(ft({id:t.id},e))});a.handleClose()},function(e){console.log(e),a.setState({error:e})})},n))}return Et(t,[{key:"componentDidMount",value:function(){this.fetchNotes()}},{key:"render",value:function(){var e=this,t=this.state,n=t.notes,a=t.selectedNote,r=t.mode,l=t.openNoteDrawer,i=t.config,c=t.drawerKey,s=this.props.classes;return o.a.createElement(Le.a,{className:s.root},o.a.createElement(Nt,{noteTypes:i.note_type,openDrawer:this.openDrawer("create")}),o.a.createElement(dt,{key:c,isOpen:l,mode:r,note:a,handleClose:this.handleClose,handleSaveNote:this.handleSaveNote,handleDeleteNote:this.handleDeleteNote,config:i}),o.a.createElement(K.a,null,n.map(function(t,n){return o.a.createElement(X.a,{key:t.id},o.a.createElement(Z.a,{primary:o.a.createElement(Ie.a,{container:!0,justify:"space-between"},o.a.createElement(Qe.a,{display:"inline",align:"left",color:"textPrimary",variant:"body1"},t.title),o.a.createElement(Qe.a,{display:"inline",align:"right",variant:"body1",color:"textSecondary"},t.date)),secondary:o.a.createElement(Qe.a,{noWrap:!0},t.appendix)}),o.a.createElement(Be.a,null,o.a.createElement(Je.a,{edge:"end","aria-label":"view",onClick:e.handleNoteClick(t)},o.a.createElement(ze.a,null))))})))}}]),bt(t,e),t}(o.a.Component),xt=Object(p.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},root:{width:"100%",backgroundColor:e.palette.background.paper},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},date:{fontSize:e.typography.pxToRem(13),fontWeight:e.typography.fontWeightRegular}}})(St),_t=n(1570);function Ot(e){return(Ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jt(e,t){return!t||"object"!==Ot(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Dt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jt(this,Pt(t).call(this,e))).updateClientName=function(e){n.setState({name:e})},n.fetchTasks=function(){fetch("https://api.cooby.co/clients/"+n.state.clientId+"/tasks/",{method:"GET",mode:"cors",headers:Object(ue.d)()}).then(function(e){return e.json()}).then(function(e){n.setState({tasks:e.tasks})},function(e){n.setState({error:e})})},n.handleTabChange=function(e,t){n.setState({tabIndex:t})},n.handleChangeIndex=function(e){n.setState({tabIndex:e})};var a=n.props.location.pathname.replace("/app/client/","");return n.state={clientId:a,name:null,error:null,isLoaded:!1,tabIndex:0,handlers:{updateClientName:n.updateClientName}},n}var n,a,l;return n=t,(a=[{key:"componentDidMount",value:function(){this.fetchTasks()}},{key:"render",value:function(){var e=this.state,t=e.clientId,n=e.name,a=e.tabIndex,l=(e.isLoaded,e.handlers);return o.a.createElement("section",{className:"page-with-tabs"},o.a.createElement(r.a,{type:"bottom",className:"ui-animate"},o.a.createElement("div",{key:"1"},o.a.createElement("div",{className:"page-header-title"}," ",n||"\u672a\u547d\u540d"," ")),o.a.createElement("div",{key:"2"},o.a.createElement(s.a,{value:a,onChange:this.handleTabChange,className:"page-tabs"},o.a.createElement(m.a,{label:"\u57fa\u672c\u8cc7\u6599"}),o.a.createElement(m.a,{label:"\u6703\u8b70\u8a18\u9304"}),o.a.createElement(m.a,{label:"\u5f85\u8fa6\u4e8b\u9805"})),o.a.createElement(f.a,{index:a,onChangeIndex:this.handleChangeIndex},o.a.createElement(De,{clientId:t,handlers:l}),o.a.createElement(function(){return o.a.createElement("div",{className:"container-fluid no-breadcrumb container-mw-md chapter"},o.a.createElement("article",{className:"article"},o.a.createElement(r.a,{type:"bottom",className:"ui-animate"},o.a.createElement("div",{key:"1",className:"mb-3"}," ",o.a.createElement(xt,{clientId:t})," "))))},null),o.a.createElement(function(){return o.a.createElement("div",{className:"container-fluid pt-3"},o.a.createElement(_t.a,null))},{clientId:this.state.clientId})))))}}])&&Tt(n.prototype,a),l&&Tt(n,l),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");kt(e.prototype,t&&t.prototype),t&&kt(e,t)}(t,e),t}(o.a.Component),Ft=n(17),Lt=function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-3 col-sm-6"},o.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},o.a.createElement("div",{className:"box-top"},o.a.createElement("div",{className:"box-icon"},o.a.createElement("span",{className:"icon-btn icon-btn-round bg-success text-white"},o.a.createElement(Ft.a,{icon:"pageview"}))),o.a.createElement("div",{className:"box-info"},o.a.createElement("p",{className:"info-desc"},"\u5ba2\u6236\u6578\u91cf"),o.a.createElement("p",{className:"box-main-num"},"+3"))),o.a.createElement("div",{className:"box-bottom"},o.a.createElement("div",{className:"box-left"},o.a.createElement("p",{className:"info-desc"},"Pages/Visit"),o.a.createElement("p",{className:"text-success"},"8.55")),o.a.createElement("div",{className:"box-right"},o.a.createElement("p",{className:"info-desc"},"% New Vist"),o.a.createElement("p",{className:"text-success"},"56.23%"))))),o.a.createElement("div",{className:"col-xl-3 col-sm-6"},o.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},o.a.createElement("div",{className:"box-top"},o.a.createElement("div",{className:"box-icon"},o.a.createElement("span",{className:"icon-btn icon-btn-round bg-info text-white"},o.a.createElement(Ft.a,{icon:"people"}))),o.a.createElement("div",{className:"box-info"},o.a.createElement("p",{className:"info-desc"},"\u6703\u8b70\u6578\u91cf"),o.a.createElement("p",{className:"box-main-num"},"+12"))),o.a.createElement("div",{className:"box-bottom"},o.a.createElement("div",{className:"box-left"},o.a.createElement("p",{className:"info-desc"},"AVG Visit Duration (s)"),o.a.createElement("p",{className:"text-info"},"9.60"))))),o.a.createElement("div",{className:"col-xl-3 col-sm-6"},o.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},o.a.createElement("div",{className:"box-top"},o.a.createElement("div",{className:"box-icon"},o.a.createElement("span",{className:"icon-btn icon-btn-round bg-warning text-white"},o.a.createElement(Ft.a,{icon:"attach_money"}))),o.a.createElement("div",{className:"box-info"},o.a.createElement("p",{className:"info-desc"},"\u5f85\u8fa6\u4e8b\u9805"),o.a.createElement("p",{className:"box-main-num"},"21\u500b\u5b8c\u6210"))),o.a.createElement("div",{className:"box-bottom"},o.a.createElement("div",{className:"box-left"},o.a.createElement("p",{className:"info-desc"},"Last Week"),o.a.createElement("p",{className:"text-warning"},"26.80%")),o.a.createElement("div",{className:"box-right"},o.a.createElement("p",{className:"info-desc"},"Last Month"),o.a.createElement("p",{className:"text-warning"},"39.33%"))))),o.a.createElement("div",{className:"col-xl-3 col-sm-6"},o.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},o.a.createElement("div",{className:"box-top"},o.a.createElement("div",{className:"box-icon"},o.a.createElement("span",{className:"icon-btn icon-btn-round bg-primary text-white"},o.a.createElement(Ft.a,{icon:"shopping_cart"}))),o.a.createElement("div",{className:"box-info"},o.a.createElement("p",{className:"info-desc"},"\u4e0b\u9031\u884c\u7a0b"),o.a.createElement("p",{className:"box-main-num"},"25.5%"))),o.a.createElement("div",{className:"box-bottom"},o.a.createElement("div",{className:"box-left"},o.a.createElement("p",{className:"info-desc"},"Last Week"),o.a.createElement("p",{className:"text-primary"},"16.50%")),o.a.createElement("div",{className:"box-right"},o.a.createElement("p",{className:"info-desc"},"Last Month"),o.a.createElement("p",{className:"text-primary"},"29.00%"))))))},Rt=n(1641),It=n(133),Wt=n(1174),Mt=n.n(Wt),Vt=n(1172),Bt=n.n(Vt),At=n(479),Jt=n.n(At),qt=n(1165),zt=n.n(qt),Gt=n(1161),Qt=n.n(Gt),Ht=n(4),Kt=n.n(Ht),Ut=n(500),Xt=n.n(Ut),Yt=n(1167),Zt=n.n(Yt),$t=n(293),en=n.n($t),tn=n(1159),nn=n.n(tn),an=n(1642),on=n.n(an),rn=n(1156),ln=n.n(rn),cn=n(1643),sn=n.n(cn),un=n(90);function mn(e){return(mn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pn(e,t){return!t||"object"!==mn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e){return(hn=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var gn=[{id:"name",numeric:!1,disablePadding:!0,label:"\u540d\u5b57"},{id:"tags",numeric:!1,disablePadding:!1,label:"\u6a19\u7c64"},{id:"company",numeric:!1,disablePadding:!1,label:"\u4efb\u8077\u516c\u53f8"},{id:"income",numeric:!1,disablePadding:!1,label:"\u6536\u5165"},{id:"note_summary",numeric:!1,disablePadding:!1,label:"\u7b46\u8a18\u6458\u8981"},{id:"updated",numeric:!1,disablePadding:!1,label:"\u66f4\u65b0\u6642\u9593"}],bn=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return pn(a,(n=a=pn(this,(e=hn(t)).call.apply(e,[this].concat(r))),a.createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},n))}var n,a,r;return n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.onSelectAllClick,a=t.order,r=t.orderBy,l=t.numSelected,i=t.rowCount;return o.a.createElement(Zt.a,null,o.a.createElement(Qt.a,null,o.a.createElement(Jt.a,{padding:"checkbox"},o.a.createElement(T.a,{indeterminate:l>0&&l<i,checked:l===i,onChange:n})),gn.map(function(t){return o.a.createElement(Jt.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:r===t.id&&a},o.a.createElement(ln.a,{title:"\u6392\u5e8f",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},o.a.createElement(nn.a,{active:r===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}])&&fn(n.prototype,a),r&&fn(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");dn(e.prototype,t&&t.prototype),t&&dn(e,t)}(t,e),t}(o.a.Component),yn=function(e){var t,n,a,r=e.classes,l=e.numSelected,i=e.filters,c=e.config,s=e.handleDeleteClients,u=e.handleQueryChange,m=e.handleFilterChange;return o.a.createElement(en.a,{className:Kt()(r.root,(t={},n=r.highlight,a=l>0,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))},o.a.createElement("div",{className:r.title},l>0?o.a.createElement(Qe.a,{color:"inherit",variant:"subheading"},l," \u500b\u5df2\u9078\u64c7"):o.a.createElement(Qe.a,{variant:"title",id:"tableTitle"},"\u5ba2\u6236\u5217\u8868")),o.a.createElement("div",{className:r.spacer}),o.a.createElement("div",{className:r.actions},l>0?o.a.createElement(ln.a,{title:"\u522a\u9664"},o.a.createElement(Je.a,{"aria-label":"Delete"},o.a.createElement(sn.a,{onClick:s}))):o.a.createElement(o.a.Fragment,null,o.a.createElement(ln.a,{title:"\u6a19\u7c64\u904e\u6ffe"},o.a.createElement(V,{id:"tag_filter",tags:i,tagOptions:c.tags||[],onChange:m})),o.a.createElement(ln.a,null,o.a.createElement(y.a,{type:"search",id:"search-bar",variant:"outlined",placeholder:"\u641c\u5c0b\u5ba2\u6236",onChange:u,InputProps:{startAdornment:o.a.createElement(Xt.a,{position:"start"},o.a.createElement(on.a,null))}})))))};function vn(e){return(vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wn(e,t){return!t||"object"!==vn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nn(e){return(Nn=Object.getPrototypeOf||function(e){return e.__proto__})(e)}yn=Object(p.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(un.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(yn);var Sn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wn(this,Nn(t).call(this,e))).handleChange=function(e){return function(t){var a,o,r;n.setState((a={},o=e,r=t.target.value,o in a?Object.defineProperty(a,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[o]=r,a))}},n.handleSave=function(e){console.log(n.state);var t=n.state,a=t.email,o=t.birthday,r=t.company,l=t.name;n.props.handlers.createClient({name:l,email:a,birthday:o,company:r}),n.props.toggleClientDrawer(!1)()},n.toggleDrawer=function(e){return function(){n.setState({isOpen:e})}},n.state={},n}var n,a,r;return n=t,(a=[{key:"render",value:function(){var e={divContainer:{width:"400px",margin:"20px"},container:{display:"flex",flexWrap:"wrap"},textField:{width:"50px"}},t=this.state,n=t.email,a=t.birthday,r=t.company,l=t.name,i=this.props,c=i.isOpen,s=i.toggleClientDrawer;return o.a.createElement(Xe.a,{anchor:"right",open:c,onClose:s(!1)},o.a.createElement("div",{style:e.divContainer},o.a.createElement(Qe.a,{variant:"h1",gutterBottom:!0},"\u65b0\u589e\u5ba2\u6236"),o.a.createElement("form",{className:e.container,noValidate:!0},o.a.createElement(y.a,{required:!0,label:"\u59d3\u540d",className:e.textField,value:l,onChange:this.handleChange("name"),margin:"normal"}),o.a.createElement(y.a,{id:"birthday",label:"\u751f\u65e5",value:a,className:e.textField,onChange:this.handleChange("birthday"),margin:"normal"}),o.a.createElement(y.a,{id:"email",label:"Email",type:"email",helperText:"\u932f\u8aa4email\u683c\u5f0f",value:n,className:e.textField,onChange:this.handleChange("email"),margin:"normal"}),o.a.createElement(y.a,{id:"company",label:"\u516c\u53f8",value:r,className:e.textField,onChange:this.handleChange("company"),margin:"normal"})),o.a.createElement("div",{className:"divider"}),o.a.createElement(Ye.a,{color:"secondary",className:"btn-w-md",onClose:s(!1)},"\u53d6\u6d88"),o.a.createElement("div",{className:"divider"}),o.a.createElement(Me.a,{variant:"contained",color:"primary",className:"btn-w-md",onClick:this.handleSave},"\u5132\u5b58")))}}])&&Cn(n.prototype,a),r&&Cn(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");En(e.prototype,t&&t.prototype),t&&En(e,t)}(t,e),t}(o.a.Component);var xn=function(e){var t=e.tags,n=e.config,a=function(){};return(t||[]).map(function(e,t){return o.a.createElement(P.a,{key:t,label:function(e){return n.tags.filter(function(t){return t.id===e})[0].name}(e),className:"table-chip bg-info px-2",onClick:a})})};function _n(e){return(_n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jn(e,t){return!t||"object"!==_n(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pn(e){return(Pn=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function Dn(e,t){return t in e?e[t]:t in e.profile?e.profile[t]:null}var Fn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jn(this,Pn(t).call(this,e))).url="https://api.cooby.co/clients/",n.toggleClientDrawer=function(e){return function(){n.setState({openClientDrawer:e})}},n.handleRequestSort=function(e,t){var a=t,o="desc";n.state.orderBy===t&&"desc"===n.state.order&&(o="asc"),n.setState({order:o,orderBy:a})},n.handleSelectAllClick=function(e,t){t?n.setState(function(e){return{selected:e.clients.map(function(e){return e.profile.id})}}):n.setState({selected:[]})},n.handleClick=function(e,t){var a=n.state.selected,o=a.indexOf(t),r=[];-1===o?r=r.concat(a,t):0===o?r=r.concat(a.slice(1)):o===a.length-1?r=r.concat(a.slice(0,-1)):o>0&&(r=r.concat(a.slice(0,o),a.slice(o+1))),n.setState({selected:r})},n.clientSearchMatch=function(e,t){var a=n.state.config.income||{};return[t.profile.name,t.profile.company,t.note_summary,a[String(t.profile.income)]].reduce(function(t,n){return t||n&&n.toLowerCase().includes(e.toLowerCase())},!1)},n.handleDeleteClients=function(e){var t=[];n.state.selected.forEach(function(e){var a=n.url+e;t.push(new Promise(function(t,n){fetch(a,{method:"DELETE",mode:"cors",headers:Object(ue.d)()}).then(function(a){a.ok?t(e):a.json().then(function(e){console.log(e),n(e)})})}))}),Promise.all(t).then(function(e){var t=n.state.clients,a=n.state.selected;e.forEach(function(e){var n=t.findIndex(function(t){return t.profile.id===e});t.splice(n,1);var o=a.indexOf(e);a.splice(o,1)}),n.setState({clients:t,selected:a})})},n.handleQueryChange=function(e){console.log(e.target.value),e.target.value.length>0?n.setState({clients:n.state.unfilteredClients.filter(function(t){return n.clientSearchMatch(e.target.value,t)})}):n.setState({clients:n.state.unfilteredClients})},n.clientFilterMatch=function(e,t){return e.reduce(function(e,n){return e||t.profile.tags.includes(n)},!1)},n.handleFilterChange=function(e){var t=e.target.value;if(e.target.value.length>0){var a=n.state.unfilteredClients.filter(function(e){return n.clientFilterMatch(t,e)});console.log(a),n.setState({clients:a})}else n.setState({clients:n.state.unfilteredClients})},n.handleChangePage=function(e,t){n.setState({page:t})},n.handleChangeRowsPerPage=function(e){n.setState({rowsPerPage:e.target.value})},n.isSelected=function(e){return-1!==n.state.selected.indexOf(e)},console.log(Object(ue.d)());return n.state={openClientDrawer:!1,order:"asc",orderBy:"name",selected:[],page:0,rowsPerPage:10,error:null,isLoaded:!1,filters:[],clients:[],filteredClients:[],config:{},handlers:{createClient:function(e){fetch(n.url,{method:"POST",mode:"cors",headers:Object(ue.d)(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(t){console.log(t),n.setState({clients:n.state.clients.concat({note_summary:t.note_summary,profile:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){On(e,t,n[t])})}return e}({},e,{id:t.id})})})})},removeTagFromClient:function(e,t){},filterByTag:function(e){}}},n}var n,a,r;return n=t,(a=[{key:"componentDidMount",value:function(){var e=this;fetch(this.url,{method:"GET",mode:"cors",headers:Object(ue.d)()}).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,clients:t.clients,unfilteredClients:t.clients,config:t.config})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.clients,r=n.order,l=n.orderBy,i=n.selected,c=n.rowsPerPage,s=n.page,u=n.filters,m=n.config,d=n.handlers,f=n.openClientDrawer,p=c-Math.min(c,a.length-s*c);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me.a,{variant:"contained",color:"primary",className:"btn-w-md",onClick:this.toggleClientDrawer(!0)},"\u65b0\u589e\u5ba2\u6236"),o.a.createElement("div",{className:"divider"}),o.a.createElement(Le.a,{className:t.root},o.a.createElement(Sn,{isOpen:f,toggleClientDrawer:this.toggleClientDrawer,handlers:d}),o.a.createElement(yn,{numSelected:i.length,filters:u,config:m,handleDeleteClients:this.handleDeleteClients,handleQueryChange:this.handleQueryChange,handleFilterChange:this.handleFilterChange}),o.a.createElement("div",{className:t.tableWrapper},o.a.createElement(Mt.a,{className:t.table,"aria-labelledby":"tableTitle"},o.a.createElement(bn,{numSelected:i.length,order:r,orderBy:l,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:a.length}),o.a.createElement(Bt.a,null,a.sort(function(e,t){return"desc"===e?function(e,n){return Dn(n,t)<Dn(e,t)?-1:1}:function(e,n){return Dn(e,t)<Dn(n,t)?-1:1}}(r,l)).slice(s*c,s*c+c).map(function(t){var n=e.isSelected(t.profile.id);return o.a.createElement(Qt.a,{hover:!0,onClick:function(n){return e.handleClick(n,t.profile.id)},role:"checkbox","aria-checked":n,tabIndex:-1,key:t.profile.id,selected:n},o.a.createElement(Jt.a,{padding:"checkbox"},o.a.createElement(T.a,{checked:n})),o.a.createElement(Jt.a,{component:"th",scope:"row",padding:"none"},o.a.createElement(Rt.a,{to:{pathname:"/app/client/"+t.profile.id,state:{client:t,config:m,handlers:d}},className:"link-cta link-animated-hover link-hover-v1 text-primary"},t.profile.name)),o.a.createElement(Jt.a,null,o.a.createElement(xn,{tags:t.profile.tags,config:m,handlers:d})),o.a.createElement(Jt.a,null,t.profile.company),o.a.createElement(Jt.a,null,m.income[t.profile.income]),o.a.createElement(Jt.a,null,t.note_summary),o.a.createElement(Jt.a,null,t.profile.updated))}),p>0&&o.a.createElement(Qt.a,{style:{height:49*p}},o.a.createElement(Jt.a,{colSpan:6}))))),o.a.createElement(zt.a,{component:"div",count:a.length,rowsPerPage:c,page:s,labelRowsPerPage:"\u6bcf\u9801\u6578\u76ee",backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9801"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9801"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})))}}])&&Tn(n.prototype,a),r&&Tn(n,r),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");kn(e.prototype,t&&t.prototype),t&&kn(e,t)}(t,e),t}(o.a.Component),Ln=Object(p.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(Fn),Rn=Object(It.a)(Ln);n(1684);function In(e){return(In="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Vn(e,t){return!t||"object"!==In(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.getPrototypeOf||function(e){return e.__proto__})(e)}n.d(t,"default",function(){return An});var An=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Vn(this,Bn(t).call(this))).state={},e}var n,a,c;return n=t,(a=[{key:"componentDidMount",value:function(){Object(ue.c)()||(console.log("go login"),this.props.history.push("/user/login"))}},{key:"render",value:function(){var e=this.props.match,t=this.state.openClientDrawer;return o.a.createElement("div",null,o.a.createElement(l.a,null,o.a.createElement(i.a,{path:"".concat(e.path,"/:clientId"),component:Dt}),o.a.createElement(i.a,{path:e.path},o.a.createElement("div",{className:"container-fluid no-breadcrumb page-dashboard"},o.a.createElement(r.a,{type:"bottom",className:"ui-animate"},o.a.createElement("div",{key:"1"},o.a.createElement(Lt,null)),o.a.createElement("div",{key:"2"},o.a.createElement(Rn,{toggleClientDrawer:this.toggleClientDrawer,openClientDrawer:t})))))))}}])&&Mn(n.prototype,a),c&&Mn(n,c),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Wn(e.prototype,t&&t.prototype),t&&Wn(e,t)}(t,e),t}(o.a.Component)}}]);
//# sourceMappingURL=14.04e29781.chunk.js.map