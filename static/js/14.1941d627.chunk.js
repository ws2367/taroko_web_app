(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1680:function(e,t,n){},1693:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(346),l=n(1573),i=n(96),c=n(335),s=n.n(c),u=n(188),m=n.n(u),d=n(1560),f=n.n(d),p=n(62),h=n(130),b=n.n(h),g=n(53),y=n.n(g),v=(n(1557),n(1638)),E=n(177),C=n.n(E),N=n(497),w=n.n(N),x=n(333),S=n.n(x),_=n(295),O=n.n(_),k=n(1286),j=n.n(k);function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function F(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var R={PaperProps:{style:{maxHeight:224,width:250}}},W=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=F(this,I(t).call(this,e))).getTagName=function(e){return n.props.tagOptions.find(function(t){return t.id==e}).name},n.handleDelete=function(e){return function(){var t=n.state.tags.filter(function(t){return t!==e});n.setState({tags:t}),n.props.onChange&&n.props.onChange({target:{value:t}})}},n.handleChange=function(e){console.log(e.target),n.setState({tags:e.target.value}),n.props.onChange&&n.props.onChange(e)},n.state={tags:e.tags||[]},n}var n,a,o;return n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.theme,o=t.tagOptions,l=t.title,i=this.state.tags;return r.a.createElement("div",{className:n.root},r.a.createElement(S.a,{className:n.formControl},r.a.createElement(w.a,{htmlFor:"select-multiple-chip"},l),r.a.createElement(O.a,{multiple:!0,value:i,onChange:this.handleChange,input:r.a.createElement(C.a,{id:"select-multiple-chip"}),renderValue:function(t){return r.a.createElement("div",{className:n.chips},t.map(function(t){return r.a.createElement(j.a,{key:t,label:e.getTagName(t),className:n.chip,onDelete:e.handleDelete(t)})}))},MenuProps:R},o.map(function(e){return r.a.createElement(b.a,{key:e.id,value:e.id,style:{fontWeight:void 0===i.indexOf(e.id)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}},e.name)}))))}}])&&D(n.prototype,a),o&&D(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");T(e.prototype,t&&t.prototype),t&&T(e,t)}(t,e),t}(r.a.Component),L=Object(p.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:400,maxWidth:"80%"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4}}},{withTheme:!0})(W),M=n(1639),B=n.n(M),V=n(38),A=n.n(V),q=(n(1567),n(110));function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function J(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),e}function G(e){return(G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");U(e.prototype,t&&t.prototype),t&&U(e,t)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){return!t||"object"!==G(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var Z=function(){return r.a.createElement("div",{className:"ball-grid-pulse"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},$=function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"40%"},longTextField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"90%"},menu:{width:200},leftIcon:{marginRight:e.spacing.unit}}},ee=function(e){function t(e){var n;return H(this,t),(n=X(this,Y(t).call(this,e))).handleDateChange=function(e){n.handleChange("birthday")({event:{target:{value:e}}})},n.handleChange=function(e){return function(t){var a=t.target.value;console.log(t.target),n.setState(function(t){return{profile:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Q(e,t,n[t])})}return e}({},t.profile,Q({},e,a))}});var r=Q({id:n.state.profile.id},e,a);fetch("https://api.cooby.co/clients/"+r.id,{method:"PUT",mode:"cors",headers:Object(q.d)(),body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){console.log(e)}),"name"==e&&n.props.handlers.updateClientName(a)}},n.state={profile:e.profile},n}return K(t,r.a.Component),t}(),te=function(e){function t(){return H(this,t),X(this,Y(t).apply(this,arguments))}return J(t,[{key:"render",value:function(){var e=this.state.profile,t=this.props,n=t.classes,o=t.config;return r.a.createElement(a.Fragment,null,r.a.createElement("form",{className:n.container,noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{required:!0,id:"name",label:"\u59d3\u540d",className:n.textField,value:e.name,onChange:this.handleChange("name"),margin:"normal"}),r.a.createElement("div",{className:"picker"},r.a.createElement(y.a,{type:"date",label:"\u751f\u65e5",value:e.birthday,onChange:this.handleDateChange,margin:"normal"})),r.a.createElement(L,{title:"\u6a19\u7c64",tags:e.tags,tagOptions:o.tags,onChange:this.handleChange("tags"),label:"Tag"}),r.a.createElement(A.a,{variant:"contained",color:"secondary"},r.a.createElement(B.a,{className:n.leftIcon}),"\u65b0\u589e\u6a19\u7c64"),r.a.createElement("div",{className:"divider"}),r.a.createElement(y.a,{id:"email",label:"Email",type:"email",value:e.email,className:n.textField,onChange:this.handleChange("email"),margin:"normal"}),r.a.createElement(y.a,{id:"cellphone",label:"\u96fb\u8a71\u865f\u78bc",className:n.textField,onChange:this.handleChange("cell_phone"),type:"tel",margin:"normal"}),r.a.createElement(y.a,{id:"company",label:"\u4efb\u8077\u516c\u53f8/\u8077\u7a31",value:e.company,className:n.textField,onChange:this.handleChange("company"),margin:"normal"}),r.a.createElement(y.a,{id:"address",label:"\u5730\u5740",value:e.address,className:n.textField,onChange:this.handleChange("address"),margin:"normal"}),r.a.createElement(y.a,{id:"income",select:!0,label:"\u6708\u6536\u5165",className:n.textField,value:String(e.income),onChange:this.handleChange("income"),SelectProps:{MenuProps:{className:n.menu}},helperText:"\u8acb\u9078\u64c7\u6536\u5165",margin:"normal"},Object.keys(o.income).map(function(e){return r.a.createElement(b.a,{key:e,value:e},o.income[e])})),r.a.createElement(y.a,{id:"source",select:!0,label:"\u8a8d\u8b58\u65b9\u5f0f",className:n.textField,value:String(e.source),onChange:this.handleChange("source"),SelectProps:{MenuProps:{className:n.menu}},helperText:"\u8acb\u9078\u64c7\u8a8d\u8b58\u65b9\u5f0f",margin:"normal"},Object.keys(o.source).map(function(e){return r.a.createElement(b.a,{key:e,value:e},o.source[e])}))))}}]),K(t,e),t}(ee),ne=function(e){function t(){return H(this,t),X(this,Y(t).apply(this,arguments))}return J(t,[{key:"render",value:function(){var e=this.state.profile,t=this.props,n=t.classes,a=t.config;return r.a.createElement("form",{className:n.container,noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{select:!0,id:"is_insured",label:"\u6709\u4fdd\u96aa\uff1f",className:n.textField,value:String(e.is_insured),SelectProps:{MenuProps:{className:n.menu}},onChange:this.handleChange("is_insured"),margin:"normal"},Object.keys(a.is_insured).map(function(e){return r.a.createElement(b.a,{key:e,value:e},a.is_insured[e])})),r.a.createElement(L,{id:"insurance_companies",title:"\u6295\u4fdd\u516c\u53f8",tags:e.insurance_companies,tagOptions:a.insurance_companies,onChange:this.handleChange("insurance_companies"),label:"\u6295\u4fdd\u516c\u53f8"}),r.a.createElement(L,{id:"insurances_of_interest",title:"\u6709\u8208\u8da3\u4fdd\u96aa\u7a2e\u985e",tags:e.insurances_of_interest,tagOptions:a.insurances_of_interest,onChange:this.handleChange("insurances_of_interest"),label:"\u6709\u8208\u8da3\u4fdd\u96aa\u7a2e\u985e"}))}}]),K(t,e),t}(ee),ae=function(e){function t(){return H(this,t),X(this,Y(t).apply(this,arguments))}return J(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.profile;e.config;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{multiline:!0,InputLabelProps:{shrink:!0},fullWidth:!0,id:"financial_plan",value:n.financial_plan,onChange:this.handleChange("financial_plan"),className:t.longTextField,margin:"normal",variant:"outlined"}))}}]),K(t,e),t}(ee),re=function(e){function t(){return H(this,t),X(this,Y(t).apply(this,arguments))}return J(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.config,a=e.clientOptions,o=this.state.profile;return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{select:!0,id:"marital_status",label:"\u5a5a\u59fb\u72c0\u6cc1",value:String(o.marital_status),className:t.longTextField,onChange:this.handleChange("marital_status"),SelectProps:{MenuProps:{className:t.menu}},margin:"normal"},Object.keys(n.marital_status).map(function(e){return r.a.createElement(b.a,{key:e,value:e},n.marital_status[e])})),r.a.createElement(L,{title:"\u5ef6\u4f38\u89aa\u53cb\u540d\u55ae",tags:o.related_clients,tagOptions:a,onChange:this.handleChange("related_clients"),label:"related_clients"}))}}]),K(t,e),t}(ee),oe=function(e){function t(){return H(this,t),X(this,Y(t).apply(this,arguments))}return J(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.config,this.state.profile);return r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement(y.a,{multiline:!0,InputLabelProps:{shrink:!0},fullWidth:!0,id:"appendix",label:"\u5099\u8a3b",variant:"outlined",value:n.appendix,className:t.longTextField,margin:"normal"}))}}]),K(t,e),t}(ee),le=Object(p.withStyles)($)(te),ie=Object(p.withStyles)($)(ne),ce=Object(p.withStyles)($)(ae),se=Object(p.withStyles)($)(re),ue=Object(p.withStyles)($)(oe),me=function(e){function t(e){var n;return H(this,t),(n=X(this,Y(t).call(this,e))).fetchClient=function(e){fetch("https://api.cooby.co/clients/",{method:"GET",mode:"cors",headers:Object(q.d)()}).then(function(e){return e.json()}).then(function(t){var a=t.clients.filter(function(t){return t.profile.id===e})[0];n.setState({isLoaded:!0,profile:a.profile,clientOptions:t.clients.map(function(e){return{id:e.profile.id,name:e.profile.name}}),config:t.config})},function(e){n.setState({isLoaded:!1,error:e})})},n.state={isLoaded:!1},n}return J(t,[{key:"componentDidMount",value:function(){this.fetchClient(this.props.clientId)}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,n=e.profile,a=e.config,o=e.clientOptions,l=this.props.handlers,i=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("article",{className:"article pt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-6"},r.a.createElement("div",{className:"box box-default mb-3"},r.a.createElement("div",{className:"box-header"},"\u57fa\u672c\u8cc7\u6599"),r.a.createElement("div",{className:"box-divider"}),r.a.createElement("div",{className:"box-body"},r.a.createElement(le,{profile:n,config:a,handlers:l}))),r.a.createElement("div",{className:"box box-default mb-3"},r.a.createElement("div",{className:"box-header"},"\u4fdd\u96aa\u72c0\u6cc1"),r.a.createElement("div",{className:"box-divider"}),r.a.createElement("div",{className:"box-body"},r.a.createElement(ie,{profile:n,config:a,handlers:l})))),r.a.createElement("div",{className:"col-xl-6"},r.a.createElement("div",{className:"box box-default mb-3"},r.a.createElement("div",{className:"box-header"},"\u8ca1\u52d9\u898f\u5283"),r.a.createElement("div",{className:"box-divider"}),r.a.createElement("div",{className:"box-body"},r.a.createElement(ce,{profile:n,config:a,handlers:l}))),r.a.createElement("div",{className:"box box-default mb-3"},r.a.createElement("div",{className:"box-header"},"\u5a5a\u59fb\u8207\u5bb6\u5ead"),r.a.createElement("div",{className:"box-divider"}),r.a.createElement("div",{className:"box-body"},r.a.createElement(se,{profile:n,config:a,handlers:l,clientOptions:o}))),r.a.createElement("div",{className:"box box-default mb-3"},r.a.createElement("div",{className:"box-header"},"\u5099\u8a3b"),r.a.createElement("div",{className:"box-divider"}),r.a.createElement("div",{className:"box-body"},r.a.createElement(ue,{profile:n,config:a,handlers:l})))))))};return r.a.createElement(function(){return t?r.a.createElement(i,null):r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement("div",{className:"m-10"},r.a.createElement(Z,null)))},null)}}]),K(t,e),t}(r.a.Component),de=n(69),fe=n.n(de),pe=n(1221),he=n.n(pe),be=n(131),ge=n.n(be),ye=n(57),ve=n.n(ye),Ee=n(94),Ce=n.n(Ee),Ne=n(95),we=n.n(Ne),xe=n(104),Se=n.n(xe),_e=n(1637),Oe=n.n(_e),ke=n(59),je=n.n(ke),Pe=n(574),Te=n.n(Pe),De=n(572),Fe=n.n(De),Ie=n(348);function Re(e){return(Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Le(e,t,n[t])})}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ve(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var qe=function(e){var t=e.note,n=e.classes,a=e.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{variant:"subheading",gutterBottom:!0},"\u905e\u9001\u7d30\u7bc0"),r.a.createElement(y.a,{id:"sent_time",label:"\u905e\u9001\u65e5\u671f",type:"date",value:t.additional_data.sent_time,className:n.textField,onChange:a(!0,"sent_time"),margin:"normal"}),r.a.createElement(y.a,{id:"sent_content",label:"\u905e\u9001\u5167\u5bb9",value:t.additional_data.sent_content,className:n.longTextField,onChange:a(!0,"sent_content"),margin:"normal"}))},ze=function(e){var t=e.note,n=e.classes,a=e.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{label:"\u5730\u9ede",className:n.textField,value:t.location,onChange:a(!1,"location"),margin:"normal"}),r.a.createElement(y.a,{required:!0,id:"date",label:"\u65e5\u671f",type:"date",value:t.date,className:n.textField,onChange:a(!1,"date"),margin:"normal"}),r.a.createElement(y.a,{id:"appendix",label:"\u5099\u8a3b",value:t.appendix,variant:"outlined",className:n.longTextField,onChange:a(!1,"appendix"),margin:"normal"}))},Je=function(e){var t=e.note,n=e.classes,a=e.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{variant:"subheading",gutterBottom:!0},"\u7406\u8ce0\u7d30\u7bc0"),r.a.createElement(y.a,{id:"claim_time",label:"\u7406\u8ce0\u65e5\u671f",type:"date",value:t.additional_data.claim_time,className:n.textField,onChange:a(!0,"claim_time"),margin:"normal"}),r.a.createElement(y.a,{id:"claim_content",label:"\u7406\u8ce0\u5167\u5bb9",value:t.additional_data.claim_content,className:n.longTextField,onChange:a(!0,"claim_content"),margin:"normal"}))},Ge=function(e){var t=e.note,n=e.classes,a=e.handleChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{variant:"subheading",gutterBottom:!0},"\u7c3d\u7d04\u7d30\u7bc0"),r.a.createElement(y.a,{id:"signed_time",label:"\u7c3d\u7d04\u65e5\u671f",type:"date",value:t.additional_data.signed_time,className:n.textField,onChange:a(!0,"signed_time"),margin:"normal"}),r.a.createElement(y.a,{id:"signed_content",label:"\u7c3d\u7d04\u5167\u5bb9",value:t.additional_data.signed_content,className:n.longTextField,onChange:a(!0,"signed_content"),margin:"normal"}))},Qe=function(e){var t=e.note,n=e.classes,a=e.handleChange;return r.a.createElement(y.a,{id:"current_insurance",label:"\u4fdd\u96aa\u72c0\u6cc1",value:t.additional_data.current_insurance,className:n.longTextField,onChange:a(!0,"current_insurance"),margin:"normal"})},He=function(e){var t=e.note,n=e.classes,a=e.handleChange;switch(String(t.note_type)){case"1":return r.a.createElement(Qe,{note:t,classes:n,handleChange:a});case"2":return r.a.createElement(qe,{note:t,classes:n,handleChange:a});case"3":return r.a.createElement(Ge,{note:t,classes:n,handleChange:a});case"4":return r.a.createElement(Je,{note:t,classes:n,handleChange:a});default:return r.a.createElement(r.a.Fragment,null)}},Ke=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return Ve(a,(n=a=Ve(this,(e=Ae(t)).call.apply(e,[this].concat(o))),a.state={note:We({},a.props.note,{additional_data:We({},a.props.note.additional_data)})||{additional_data:{}}},a.handleChange=function(e,t){return function(n){var r=a.state.note;e?r.additional_data[t]=n.target.value:r[t]=n.target.value,a.setState({note:r})}},a.handleSave=function(e){a.props.handleSaveNote(a.state.note)},a.handleDelete=function(e){e.preventDefault(),a.props.handleDeleteNote(a.state.note.id)},n))}var n,a,o;return n=t,(a=[{key:"render",value:function(){var e=this.state.note,t=this.props,n=t.mode,a=t.classes,o=t.isOpen,l=t.handleClose,i=t.config;return r.a.createElement(Fe.a,{anchor:"right",open:o,onClose:l},r.a.createElement("div",{className:a.divContainer},r.a.createElement(je.a,{variant:"title",gutterBottom:!0},"create"===n?"\u65b0\u589e\u6703\u8b70\u8a18\u9304":"\u7de8\u8f2f\u6703\u8b70\u8a18\u9304"),r.a.createElement(y.a,{label:"\u6a19\u984c",className:a.textField,InputProps:{classes:{input:{fontSize:50}}},value:e.title,onChange:this.handleChange(!1,"title"),margin:"normal"}),r.a.createElement(je.a,{variant:"subheading",gutterBottom:!0},i.note_type[e.note_type]),r.a.createElement("form",{className:a.container,noValidate:!0},r.a.createElement(ze,{note:e,classes:a,handleChange:this.handleChange}),r.a.createElement(He,{note:e,classes:a,handleChange:this.handleChange})),r.a.createElement("div",{className:"divider"}),"edit"===n&&r.a.createElement(A.a,{color:"primary",onClick:this.handleDelete},"\u522a\u9664"),r.a.createElement(Ie.a,{color:"secondary",className:"btn-w-md",onClick:l},"\u53d6\u6d88"),r.a.createElement("div",{className:"divider"}),r.a.createElement(A.a,{variant:"contained",color:"primary",className:"btn-w-md",onClick:this.handleSave},"\u5132\u5b58")))}}])&&Be(n.prototype,a),o&&Be(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Me(e.prototype,t&&t.prototype),t&&Me(e,t)}(t,e),t}(r.a.Component),Ue=Object(p.withStyles)(function(e){return{divContainer:{width:"200px",margin:"20px"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:150,width:"40%"},longTextField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:300,width:"90%"},container:{display:"flex",flexWrap:"wrap"}}})(Ke);function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Ye(e,t,n[t])})}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e){return(Ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");tt(e.prototype,t&&t.prototype),t&&tt(e,t)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function at(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e}function rt(e,t){return!t||"object"!==Ze(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ot(e){return(ot=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var lt=function(e){function t(){var e,n,a;$e(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return rt(a,(n=a=rt(this,(e=ot(t)).call.apply(e,[this].concat(o))),a.state={AnchorEl:null},a.handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleMenuItemClick=function(e){a.setState({anchorEl:null}),a.props.openDrawer({note_type:e.target.value,additional_data:{}})},n))}return at(t,[{key:"render",value:function(){var e=this,t=this.state.anchorEl,n=this.props.noteTypes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{"aria-controls":"simple-menu","aria-haspopup":"true",variant:"contained",color:"primary",className:"btn-w-md",onClick:this.handleClick},"\u65b0\u589e\u6703\u8b70\u7d00\u9304"),r.a.createElement(Te.a,{id:"simple-menu",anchorEl:t,keepMounted:!0,open:Boolean(t),onClose:this.handleClose},Object.keys(n).map(function(t){return r.a.createElement(b.a,{key:t,value:t,onClick:e.handleMenuItemClick},n[t])})))}}]),et(t,e),t}(r.a.Component),it=function(e){function t(){var e,n,a;$e(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return rt(a,(n=a=rt(this,(e=ot(t)).call.apply(e,[this].concat(o))),a.collectionEndpoint="https://api.cooby.co/clients/"+a.props.clientId+"/notes/",a.state={notes:[],mode:"create",openNoteDrawer:!1,selectedNote:{additional_data:{}},config:{note_type:{0:"\u7a7a\u767d\u7b46\u8a18",1:"\u4e00\u822c\u7b46\u8a18",2:"\u905e\u9001\u5efa\u8b70\u66f8",3:"\u4fdd\u96aa\u7c3d\u7d04",4:"\u4fdd\u96aa\u7406\u8ce0"}}},a.fetchNotes=function(){fetch(a.collectionEndpoint,{method:"GET",mode:"cors",headers:Object(q.d)()}).then(function(e){return e.json()}).then(function(e){a.setState({notes:e.notes})},function(e){a.setState({error:e})})},a.openDrawer=function(e){return function(t){console.log(t),console.log(e),a.setState({openNoteDrawer:!0,selectedNote:t,mode:e,drawerKey:t.id?t.id:Math.random()})}},a.handleNoteClick=function(e){return function(t){console.log(e),a.openDrawer("edit")(e)}},a.handleClose=function(){a.setState({openNoteDrawer:!1})},a.handleDeleteNote=function(e){var t=a.collectionEndpoint+e;console.log(t),fetch(t,{method:"DELETE",mode:"cors",headers:Object(q.d)(),body:JSON.stringify({})}).then(function(t){if(t.ok){var n=a.state.notes,r=n.findIndex(function(t){return t.id===e});n.splice(r,1),a.setState({notes:n})}else t.json().then(function(e){console.log(e)});a.handleClose()})},a.handleSaveNote=function(e){console.log(e);var t="edit"===a.state.mode?a.collectionEndpoint+e.id:a.collectionEndpoint;fetch(t,{method:"edit"===a.state.mode?"put":"post",mode:"cors",headers:Object(q.d)(),body:JSON.stringify(e)}).then(function(e){return e.ok&&"edit"===a.state.mode?(console.log("edittttt"),new Promise(function(e,t){e({})})):(console.log("new!"),e.json())}).then(function(t){if(console.log(t),"edit"===a.state.mode){var n=a.state.notes.findIndex(function(t){return t.id===e.id});if(n){var r=a.state.notes[n],o=a.state.notes;o[n]=Xe({},r,e),a.setState({notes:o})}}else a.setState({notes:a.state.notes.concat(Xe({id:t.id},e))});a.handleClose()},function(e){console.log(e),a.setState({error:e})})},n))}return at(t,[{key:"componentDidMount",value:function(){this.fetchNotes()}},{key:"render",value:function(){var e=this,t=this.state,n=t.notes,a=t.selectedNote,o=t.mode,l=t.openNoteDrawer,i=t.config,c=t.drawerKey,s=this.props.classes;return r.a.createElement(fe.a,{className:s.root},r.a.createElement(lt,{noteTypes:i.note_type,openDrawer:this.openDrawer("create")}),r.a.createElement(Ue,{key:c,isOpen:l,mode:o,note:a,handleClose:this.handleClose,handleSaveNote:this.handleSaveNote,handleDeleteNote:this.handleDeleteNote,config:i}),r.a.createElement(ge.a,null,n.map(function(t,n){return r.a.createElement(ve.a,null,r.a.createElement(we.a,{key:t.id,primary:r.a.createElement(he.a,{container:!0,justify:"space-between"},r.a.createElement(je.a,{inline:!0,align:"left",color:"textPrimary",variant:"body1"},t.title),r.a.createElement(je.a,{inline:!0,align:"right",variant:"body1",color:"textSecondary"},t.date)),secondary:r.a.createElement(je.a,{noWrap:"true"},t.appendix)}),r.a.createElement(Ce.a,null,r.a.createElement(Se.a,{edge:"end","aria-label":"view",onClick:e.handleNoteClick(t)},r.a.createElement(Oe.a,null))))})))}}]),et(t,e),t}(r.a.Component),ct=Object(p.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},root:{width:"100%",backgroundColor:e.palette.background.paper},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},date:{fontSize:e.typography.pxToRem(13),fontWeight:e.typography.fontWeightRegular}}})(it),st=n(1561);function ut(e){return(ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ft(e,t){return!t||"object"!==ut(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var ht=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ft(this,pt(t).call(this,e))).updateClientName=function(e){n.setState({name:e})},n.fetchTasks=function(){fetch("https://api.cooby.co/clients/"+n.state.clientId+"/tasks/",{method:"GET",mode:"cors",headers:Object(q.d)()}).then(function(e){return e.json()}).then(function(e){n.setState({tasks:e.tasks})},function(e){n.setState({error:e})})},n.handleTabChange=function(e,t){n.setState({tabIndex:t})},n.handleChangeIndex=function(e){n.setState({tabIndex:e})};var a=n.props.location.pathname.replace("/app/client/","");return n.state={notes:[],todos:[],clientId:a,name:null,error:null,isLoaded:!1,tabIndex:0,handlers:{updateClientName:n.updateClientName}},n}var n,a,l;return n=t,(a=[{key:"componentDidMount",value:function(){this.fetchTasks()}},{key:"render",value:function(){var e=this,t=this.state,n=t.clientId,a=t.name,l=t.tabIndex,i=(t.isLoaded,t.handlers),c=(t.notes,function(){return r.a.createElement("div",{className:"container-fluid no-breadcrumb container-mw-md chapter"},r.a.createElement("article",{className:"article"},r.a.createElement(o.a,{type:"bottom",className:"ui-animate"},r.a.createElement("div",{key:"1",className:"mb-3"}," ",r.a.createElement(ct,{clientId:n})," "))))}),u=function(){return r.a.createElement("div",{className:"container-fluid pt-3"},r.a.createElement(st.a,null))};return r.a.createElement(function(){return r.a.createElement("section",{className:"page-with-tabs"},r.a.createElement(o.a,{type:"bottom",className:"ui-animate"},r.a.createElement("div",{key:"1"},r.a.createElement("div",{className:"page-header-title"}," ",a||"\u672a\u547d\u540d"," ")),r.a.createElement("div",{key:"2"},r.a.createElement(s.a,{value:l,onChange:e.handleTabChange,className:"page-tabs"},r.a.createElement(m.a,{label:"\u57fa\u672c\u8cc7\u6599"}),r.a.createElement(m.a,{label:"\u6703\u8b70\u8a18\u9304"}),r.a.createElement(m.a,{label:"\u5f85\u8fa6\u4e8b\u9805"})),r.a.createElement(f.a,{index:l,onChangeIndex:e.handleChangeIndex},r.a.createElement(me,{clientId:n,handlers:i}),r.a.createElement(c,null),r.a.createElement(u,{clientId:e.state.clientId})))))},null)}}])&&dt(n.prototype,a),l&&dt(n,l),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");mt(e.prototype,t&&t.prototype),t&&mt(e,t)}(t,e),t}(r.a.Component),bt=n(17),gt=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-3 col-sm-6"},r.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},r.a.createElement("div",{className:"box-top"},r.a.createElement("div",{className:"box-icon"},r.a.createElement("span",{className:"icon-btn icon-btn-round bg-success text-white"},r.a.createElement(bt.a,{icon:"pageview"}))),r.a.createElement("div",{className:"box-info"},r.a.createElement("p",{className:"info-desc"},"\u5ba2\u6236\u6578\u91cf"),r.a.createElement("p",{className:"box-main-num"},"+3"))),r.a.createElement("div",{className:"box-bottom"},r.a.createElement("div",{className:"box-left"},r.a.createElement("p",{className:"info-desc"},"Pages/Visit"),r.a.createElement("p",{className:"text-success"},"8.55")),r.a.createElement("div",{className:"box-right"},r.a.createElement("p",{className:"info-desc"},"% New Vist"),r.a.createElement("p",{className:"text-success"},"56.23%"))))),r.a.createElement("div",{className:"col-xl-3 col-sm-6"},r.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},r.a.createElement("div",{className:"box-top"},r.a.createElement("div",{className:"box-icon"},r.a.createElement("span",{className:"icon-btn icon-btn-round bg-info text-white"},r.a.createElement(bt.a,{icon:"people"}))),r.a.createElement("div",{className:"box-info"},r.a.createElement("p",{className:"info-desc"},"\u6703\u8b70\u6578\u91cf"),r.a.createElement("p",{className:"box-main-num"},"+12"))),r.a.createElement("div",{className:"box-bottom"},r.a.createElement("div",{className:"box-left"},r.a.createElement("p",{className:"info-desc"},"AVG Visit Duration (s)"),r.a.createElement("p",{className:"text-info"},"9.60"))))),r.a.createElement("div",{className:"col-xl-3 col-sm-6"},r.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},r.a.createElement("div",{className:"box-top"},r.a.createElement("div",{className:"box-icon"},r.a.createElement("span",{className:"icon-btn icon-btn-round bg-warning text-white"},r.a.createElement(bt.a,{icon:"attach_money"}))),r.a.createElement("div",{className:"box-info"},r.a.createElement("p",{className:"info-desc"},"\u5f85\u8fa6\u4e8b\u9805"),r.a.createElement("p",{className:"box-main-num"},"21\u500b\u5b8c\u6210"))),r.a.createElement("div",{className:"box-bottom"},r.a.createElement("div",{className:"box-left"},r.a.createElement("p",{className:"info-desc"},"Last Week"),r.a.createElement("p",{className:"text-warning"},"26.80%")),r.a.createElement("div",{className:"box-right"},r.a.createElement("p",{className:"info-desc"},"Last Month"),r.a.createElement("p",{className:"text-warning"},"39.33%"))))),r.a.createElement("div",{className:"col-xl-3 col-sm-6"},r.a.createElement("section",{className:"number-card-v4 mdc-elevation--z1 mb-4"},r.a.createElement("div",{className:"box-top"},r.a.createElement("div",{className:"box-icon"},r.a.createElement("span",{className:"icon-btn icon-btn-round bg-primary text-white"},r.a.createElement(bt.a,{icon:"shopping_cart"}))),r.a.createElement("div",{className:"box-info"},r.a.createElement("p",{className:"info-desc"},"\u4e0b\u9031\u884c\u7a0b"),r.a.createElement("p",{className:"box-main-num"},"25.5%"))),r.a.createElement("div",{className:"box-bottom"},r.a.createElement("div",{className:"box-left"},r.a.createElement("p",{className:"info-desc"},"Last Week"),r.a.createElement("p",{className:"text-primary"},"16.50%")),r.a.createElement("div",{className:"box-right"},r.a.createElement("p",{className:"info-desc"},"Last Month"),r.a.createElement("p",{className:"text-primary"},"29.00%"))))))},yt=n(1633),vt=n(133),Et=n(1172),Ct=n.n(Et),Nt=n(1170),wt=n.n(Nt),xt=n(477),St=n.n(xt),_t=n(1163),Ot=n.n(_t),kt=n(1159),jt=n.n(kt),Pt=n(158),Tt=n.n(Pt),Dt=n(4),Ft=n.n(Dt),It=n(498),Rt=n.n(It),Wt=n(1165),Lt=n.n(Wt),Mt=n(293),Bt=n.n(Mt),Vt=n(1157),At=n.n(Vt),qt=n(1634),zt=n.n(qt),Jt=n(1154),Gt=n.n(Jt),Qt=n(1636),Ht=n.n(Qt),Kt=n(1635),Ut=n.n(Kt),Xt=n(89);function Yt(e){return(Yt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function en(e,t){return!t||"object"!==Yt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var nn=[{id:"name",numeric:!1,disablePadding:!0,label:"\u540d\u5b57"},{id:"tags",numeric:!1,disablePadding:!1,label:"\u6a19\u7c64"},{id:"company",numeric:!1,disablePadding:!1,label:"\u4efb\u8077\u516c\u53f8"},{id:"income",numeric:!1,disablePadding:!1,label:"\u6536\u5165"},{id:"note_summary",numeric:!1,disablePadding:!1,label:"\u7b46\u8a18\u6458\u8981"},{id:"updated",numeric:!1,disablePadding:!1,label:"\u66f4\u65b0\u6642\u9593"}],an=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return en(a,(n=a=en(this,(e=tn(t)).call.apply(e,[this].concat(o))),a.createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},n))}var n,a,o;return n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.onSelectAllClick,a=t.order,o=t.orderBy,l=t.numSelected,i=t.rowCount;return r.a.createElement(Lt.a,null,r.a.createElement(jt.a,null,r.a.createElement(St.a,{padding:"checkbox"},r.a.createElement(Tt.a,{indeterminate:l>0&&l<i,checked:l===i,onChange:n})),nn.map(function(t){return r.a.createElement(St.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:o===t.id&&a},r.a.createElement(Gt.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(At.a,{active:o===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}])&&$t(n.prototype,a),o&&$t(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Zt(e.prototype,t&&t.prototype),t&&Zt(e,t)}(t,e),t}(r.a.Component),rn=function(e){var t,n,a,o=e.numSelected,l=e.classes,i=e.handleQueryChange;return r.a.createElement(Bt.a,{className:Ft()(l.root,(t={},n=l.highlight,a=o>0,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))},r.a.createElement("div",{className:l.title},o>0?r.a.createElement(je.a,{color:"inherit",variant:"subheading"},o," \u500b\u5df2\u9078\u64c7"):r.a.createElement(je.a,{variant:"title",id:"tableTitle"},"\u5ba2\u6236\u5217\u8868")),r.a.createElement("div",{className:l.spacer}),r.a.createElement("div",{className:l.actions},o>0?r.a.createElement(Gt.a,{title:"\u522a\u9664"},r.a.createElement(Se.a,{"aria-label":"Delete"},r.a.createElement(Ht.a,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt.a,{title:"\u7be9\u9078\u5217\u8868"},r.a.createElement(Se.a,{"aria-label":"Filter list"},r.a.createElement(Ut.a,null))),r.a.createElement(Gt.a,null,r.a.createElement(y.a,{type:"search",id:"search-bar",variant:"outlined",placeholder:"\u641c\u5c0b\u5ba2\u6236",onChange:i,InputProps:{startAdornment:r.a.createElement(Rt.a,{position:"start"},r.a.createElement(zt.a,null))}})))))};function on(e){return(on="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function sn(e,t){return!t||"object"!==on(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.getPrototypeOf||function(e){return e.__proto__})(e)}rn=Object(p.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Xt.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(rn);var mn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sn(this,un(t).call(this,e))).handleChange=function(e){return function(t){var a,r,o;n.setState((a={},r=e,o=t.target.value,r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a))}},n.handleSave=function(e){console.log(n.state);var t=n.state,a=t.email,r=t.birthday,o=t.company,l=t.name;n.props.handlers.createClient({name:l,email:a,birthday:r,company:o})},n.toggleDrawer=function(e){return function(){n.setState({isOpen:e})}},n.state={},n}var n,a,o;return n=t,(a=[{key:"render",value:function(){var e={divContainer:{width:"400px",margin:"20px"},container:{display:"flex",flexWrap:"wrap"},textField:{width:"50px"}},t=this.state,n=t.email,a=t.birthday,o=t.company,l=t.name,i=this.props,c=i.isOpen,s=i.toggleClientDrawer;return r.a.createElement(Fe.a,{anchor:"right",open:c,onClose:s(!1)},r.a.createElement("div",{style:e.divContainer},r.a.createElement(je.a,{variant:"h1",gutterBottom:!0},"\u65b0\u589e\u5ba2\u6236"),r.a.createElement("form",{className:e.container,noValidate:!0},r.a.createElement(y.a,{required:!0,label:"\u59d3\u540d",className:e.textField,value:l,onChange:this.handleChange("name"),margin:"normal"}),r.a.createElement(y.a,{id:"birthday",label:"\u751f\u65e5",value:a,className:e.textField,onChange:this.handleChange("birthday"),margin:"normal"}),r.a.createElement(y.a,{id:"email",label:"Email",type:"email",helperText:"\u932f\u8aa4email\u683c\u5f0f",value:n,className:e.textField,onChange:this.handleChange("email"),margin:"normal"}),r.a.createElement(y.a,{id:"company",label:"\u516c\u53f8",value:o,className:e.textField,onChange:this.handleChange("company"),margin:"normal"})),r.a.createElement("div",{className:"divider"}),r.a.createElement(Ie.a,{color:"secondary",className:"btn-w-md",onClose:s(!1)},"\u53d6\u6d88"),r.a.createElement("div",{className:"divider"}),r.a.createElement(A.a,{variant:"contained",color:"primary",className:"btn-w-md",onClick:this.handleSave},"\u5132\u5b58")))}}])&&cn(n.prototype,a),o&&cn(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");ln(e.prototype,t&&t.prototype),t&&ln(e,t)}(t,e),t}(r.a.Component);var dn=function(e){var t=e.tags,n=e.config,a=function(){};return t.map(function(e,t){return r.a.createElement(j.a,{key:t,label:function(e){return n.tags.filter(function(t){return t.id===e})[0].name}(e),className:"table-chip bg-info px-2",onClick:a})})};function fn(e){return(fn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gn(e,t){return!t||"object"!==fn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yn(e){return(yn=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var vn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gn(this,yn(t).call(this,e))).toggleClientDrawer=function(e){return function(){n.setState({openClientDrawer:e})}},n.handleRequestSort=function(e,t){var a=t,r="desc";n.state.orderBy===t&&"desc"===n.state.order&&(r="asc"),n.setState({order:r,orderBy:a})},n.handleSelectAllClick=function(e,t){t?n.setState(function(e){return{selected:e.clients.map(function(e){return e.id})}}):n.setState({selected:[]})},n.handleClick=function(e,t){var a=n.state.selected,r=a.indexOf(t),o=[];-1===r?o=o.concat(a,t):0===r?o=o.concat(a.slice(1)):r===a.length-1?o=o.concat(a.slice(0,-1)):r>0&&(o=o.concat(a.slice(0,r),a.slice(r+1))),n.setState({selected:o})},n.clientSearchMatch=function(e,t){var a=n.state.config.income||{};return[t.profile.name,t.profile.company,t.note_summary,a[String(t.profile.income)]].reduce(function(t,n){return t||n&&n.toLowerCase().includes(e.toLowerCase())},!1)},n.handleQueryChange=function(e){console.log(e.target.value),e.target.value.length>0?n.setState({clients:n.state.unfilteredClients.filter(function(t){return n.clientSearchMatch(e.target.value,t)})}):n.setState({clients:n.state.unfilteredClients})},n.handleChangePage=function(e,t){n.setState({page:t})},n.handleChangeRowsPerPage=function(e){n.setState({rowsPerPage:e.target.value})},n.isSelected=function(e){return-1!==n.state.selected.indexOf(e)},console.log(Object(q.d)());return n.state={openClientDrawer:!1,order:"asc",orderBy:"name",selected:[],page:0,rowsPerPage:10,error:null,isLoaded:!1,clients:[],filteredClients:[],config:{},handlers:{createClient:function(e){fetch("https://api.cooby.co/clients/",{method:"POST",mode:"cors",headers:Object(q.d)(),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(t){console.log(t),n.setState({clients:n.state.clients.concat({note_summary:t.note_summary,profile:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){pn(e,t,n[t])})}return e}({},e,{id:t.id})})})})},removeTagFromClient:function(e,t){},filterByTag:function(e){}}},n}var n,a,o;return n=t,(a=[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.cooby.co/clients/",{method:"GET",mode:"cors",headers:Object(q.d)()}).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,clients:t.clients,unfilteredClients:t.clients,config:t.config})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.clients,o=n.order,l=n.orderBy,i=n.selected,c=n.rowsPerPage,s=n.page,u=n.config,m=n.handlers,d=n.openClientDrawer,f=c-Math.min(c,a.length-s*c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{variant:"contained",color:"primary",className:"btn-w-md",onClick:this.toggleClientDrawer(!0)},"\u65b0\u589e\u5ba2\u6236"),r.a.createElement("div",{className:"divider"}),r.a.createElement(fe.a,{className:t.root},r.a.createElement(mn,{isOpen:d,toggleClientDrawer:this.toggleClientDrawer,handlers:m}),r.a.createElement(rn,{numSelected:i.length,handleQueryChange:this.handleQueryChange}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(Ct.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(an,{numSelected:i.length,order:o,orderBy:l,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:a.length}),r.a.createElement(wt.a,null,a.sort(function(e,t){return"desc"===e?function(e,n){return n[t]<e[t]?-1:1}:function(e,n){return e[t]<n[t]?-1:1}}(o,l)).slice(s*c,s*c+c).map(function(t){var n=e.isSelected(t.profile.id);return r.a.createElement(jt.a,{hover:!0,onClick:function(n){return e.handleClick(n,t.profile.id)},role:"checkbox","aria-checked":n,tabIndex:-1,key:t.profile.id,selected:n},r.a.createElement(St.a,{padding:"checkbox"},r.a.createElement(Tt.a,{checked:n})),r.a.createElement(St.a,{component:"th",scope:"row",padding:"none"},r.a.createElement(yt.a,{to:{pathname:"/app/client/"+t.profile.id,state:{client:t,config:u,handlers:m}},className:"link-cta link-animated-hover link-hover-v1 text-primary"},t.profile.name)),r.a.createElement(St.a,null,r.a.createElement(dn,{tags:t.profile.tags,config:u,handlers:m})),r.a.createElement(St.a,null,t.profile.company),r.a.createElement(St.a,null,u.income[t.profile.income]),r.a.createElement(St.a,null,t.note_summary),r.a.createElement(St.a,null,t.profile.updated))}),f>0&&r.a.createElement(jt.a,{style:{height:49*f}},r.a.createElement(St.a,{colSpan:6}))))),r.a.createElement(Ot.a,{component:"div",count:a.length,rowsPerPage:c,page:s,labelRowsPerPage:"\u6bcf\u9801\u6578\u76ee",backIconButtonProps:{"aria-label":"\u4e0a\u4e00\u9801"},nextIconButtonProps:{"aria-label":"\u4e0b\u4e00\u9801"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage})))}}])&&bn(n.prototype,a),o&&bn(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");hn(e.prototype,t&&t.prototype),t&&hn(e,t)}(t,e),t}(r.a.Component),En=Object(p.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}})(vn),Cn=Object(vt.a)(En);n(1680);function Nn(e){return(Nn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Sn(e,t){return!t||"object"!==Nn(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _n(e){return(_n=Object.getPrototypeOf||function(e){return e.__proto__})(e)}n.d(t,"default",function(){return On});var On=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Sn(this,_n(t).call(this))).state={},e}var n,a,c;return n=t,(a=[{key:"componentDidMount",value:function(){Object(q.c)()||(console.log("go login"),this.props.history.push("/user/login"))}},{key:"render",value:function(){var e=this.props.match,t=this.state.openClientDrawer;return r.a.createElement("div",null,r.a.createElement(l.a,null,r.a.createElement(i.a,{path:"".concat(e.path,"/:clientId"),component:ht}),r.a.createElement(i.a,{path:e.path},r.a.createElement("div",{className:"container-fluid no-breadcrumb page-dashboard"},r.a.createElement(o.a,{type:"bottom",className:"ui-animate"},r.a.createElement("div",{key:"1"},r.a.createElement(gt,null)),r.a.createElement("div",{key:"2"},r.a.createElement(Cn,{toggleClientDrawer:this.toggleClientDrawer,openClientDrawer:t})))))))}}])&&xn(n.prototype,a),c&&xn(n,c),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");wn(e.prototype,t&&t.prototype),t&&wn(e,t)}(t,e),t}(r.a.Component)}}]);
//# sourceMappingURL=14.1941d627.chunk.js.map